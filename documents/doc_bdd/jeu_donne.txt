USE schoolia;

-- ===========================================================
-- 1️⃣ Données pour niveau_scolaire
-- ===========================================================
INSERT INTO niveau_scolaire (niveau)
VALUES 
('Collège'),
('Lycée'),
('Université');

-- ===========================================================
-- 2️⃣ Données pour agent (IA ou assistants virtuels)
-- ===========================================================
INSERT INTO agent (nom, avatar, description, temperature, system_prompt)
VALUES
('Agent Mathéo', 'math.png', 'Agent spécialisé en mathématiques', 0.7, 'Tu es un assistant de mathématiques.'),
('Agent Histoire', 'hist.png', 'Agent passionné d\'histoire et de culture générale', 0.6, 'Tu es un professeur d\'histoire.'),
('Agent Scolaire', 'school.png', 'Agent généraliste pour le suivi scolaire', 0.8, 'Tu aides les élèves à organiser leur travail.');

-- ===========================================================
-- 3️⃣ Données pour matière
-- ===========================================================
INSERT INTO matiere (nom, id_agent)
VALUES
('Mathématiques', 1),
('Histoire', 2),
('Méthodologie', 3);

-- ===========================================================
-- 4️⃣ Données pour utilisateur
-- ===========================================================
INSERT INTO utilisateur (nom, prenom, email, mot_de_passe, role, id_niveau_scolaire)
VALUES
('Dupont', 'Alice', 'alice.dupont@example.com', MD5('password1'), 'etudiant', 1),
('Martin', 'Jean', 'jean.martin@example.com', MD5('password2'), 'professeur', 2),
('Durand', 'Sophie', 'sophie.durand@example.com', MD5('password3'), 'admin', 3);

-- ===========================================================
-- 5️⃣ Données pour user_log (simuler une dernière connexion)
-- ===========================================================
INSERT INTO user_log (derniere_connection, id_user)
VALUES
(NOW() - INTERVAL 1 DAY, 1),
(NOW() - INTERVAL 3 DAY, 2),
(NOW(), 3);

-- ===========================================================
-- 6️⃣ Liaisons utilisateur ↔ agent (table utiliser)
-- ===========================================================
INSERT INTO utiliser (id_user, id_agent)
VALUES
(1, 1), -- Alice utilise l’agent de math
(1, 3), -- Alice utilise aussi l’agent scolaire
(2, 2), -- Jean (prof) utilise l’agent d’histoire
(3, 3); -- Sophie (admin) utilise l’agent généraliste

-- ===========================================================
-- 7️⃣ Données de conversation & message pour tester les relations
-- ===========================================================
INSERT INTO conversation (titre, id_agent, id_user)
VALUES
('Révision des équations', 1, 1),
('Chapitre sur la Révolution française', 2, 2);

INSERT INTO message (question, reponse, id_conversation)
VALUES
('Comment résoudre une équation du second degré ?', 'Utilise la formule du discriminant Δ = b² - 4ac.', 1),
('Quand a eu lieu la prise de la Bastille ?', 'Le 14 juillet 1789.', 2);
